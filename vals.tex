\documentclass[main.tex]{subfiles}
\begin{document}
\section{Valuations}
\subsection{Introduction}
\noindent
%
%          DEFINITION OF MODULAR MAPS
%
\begin{dfn}
\label{D:val}
Let $L$ be a lattice, $E$ an ordered Abelian group,
and $\varphi\colon L \ra E$.
\begin{enumerate}
\item
\label{D:val-mod}
$\varphi$ is \keyword{modular} provided that
\begin{equation*}
\varphi(a\wedge b) + \varphi(a \vee b)
\ =\ 
\varphi(a) + \varphi(b)
\qquad(a,b\in L).
\end{equation*}

\item
\label{D:val-val}
$\varphi$ is a \keyword{valuation}
provided that $\varphi$ is modular and order preserving.
\end{enumerate}
\end{dfn}

\begin{ex}
Let $\mathcal{F}$ be the set of finite subsets of~$\N$,
and for each $A\in \mathcal{F}$,
let $\#(A)$ be the number of elements of~$A$.
Then have 
\begin{equation*}
\#(A\cap B) + \#(A\cup B) \,=\, \#(A) + \#(B)
\qquad(A,B\in\mathcal{F}),
\end{equation*}
so obviously the map $\mathcal{F} \ra \N$
given by by $A\mapsto \#(A)$ is a valuation.
\end{ex}

\begin{ex}
\label{E:lmeas-val}
Let $\mathcal{A}$ be the set of Lebesgue measurable
subsets of~$\R$ with finite measure.
Then~$\mathcal{A}$ is a lattice of subsets of~$\R$.
Given~$A\in\mathcal{A}$,
let $\lambda(A)$ denote the measure of~$A$.
Then $A\subseteq B \implies \lambda(A)\leq \lambda (B)$
for all $A,B\in \mathcal{A}$,
and 
\begin{equation*}
\lambda(A\cap B) + \lambda(A\cup B) \,=\, \lambda(A) + \lambda(B)
\qquad(A,B\in\mathcal{A}).
\end{equation*}
So~$\lambda$ is a valuation.
\end{ex}

\begin{ex}
\label{E:ring-val}
Let~$X$ be a set and let~$\mathcal{A}$ be a ring of subsets of~$X$.
That is,
\begin{equation*}
A\cap B,\qquad\qquad A\cup B,\qquad\qquad A\backslash B
\end{equation*}
are in~$\mathcal{A}$ for all $A,B\in\mathcal{A}$.
Then clearly~$\mathcal{A}$ is a lattice.

Let $E$ be an ordered Abelian group
and let~$\mu\colon \mathcal{A}\rightarrow \R$ be a map.
Recall that~$\mu$ is \keyword{additive} if $\mu(A) + \mu(B) = \mu(A\cup B)$
for all $A,B\in\mathcal{A}$ with $A\cap B=\varnothing$.

\emph{If~$\mu$ is additive,
then $\mu$ is modular.}
Indeed,
let $A,B\in \mathcal{A}$ be given. We need to prove that
$\mu(A) + \mu(B) =\mu(A\cap B) + \mu(A\cup B)$
assuming~$\mu$ is additive.
We have
\begin{alignat*}{6}
\mu(A) + \mu(B) \,
  & =\, \mu(A\cap B \ \cup\ A\backslash B) + \mu(B) \\ 
  & =\, \mu(A\cap B) + \mu(A\backslash B)  + \mu(B)\qquad
    && \text{since } A\cap B \ \cap\ A\backslash B = \varnothing \\ 
  & =\, \mu(A\cap B) + \mu(A\backslash B \ \cup\ B ) 
    && \text{since } A\backslash B\ \cap\ B = \varnothing \\
  & =\, \mu(A\cap B) + \mu(A\cup B).
\end{alignat*}

Recall that~$\mu$ is \keyword{positive} whenever
$\mu(A)\in E^+$ for all~$A\in\mathcal{A}$.

\emph{If~$\mu$ is additive and positive,
then~$\mu$ is a valuation.}
Since~$\mu$ is additive,
$\mu$ is modular.
It remains to be shown that~$\mu$ is order preserving
(see Definition~\ref{D:val}).
Let $A\subseteq B$ from~$\mathcal{A}$ be given
in order to prove $\mu(A)\leq \mu(B)$.
We have
\begin{equation*}
(B\backslash A)\,\cup\, A\,=\,B,\qquad\qquad 
(B\backslash A)\,\cap\, A\,=\,\varnothing.
\end{equation*}
So by additivity, 
$\mu(B)=\mu(B\backslash A)+\mu(A)$.
Then $\mu(B)\geq \mu(A)$, since $\mu(B\backslash A)\geq 0$.
\end{ex}

\begin{ex}
\label{E:int-val}
Let~$\mathcal{L}$ be the set of Lebesgue integrable functions on~$\R$.
It is a lattice ordered Abelian group.
The assignment $f\mapsto \int f$ 
yields an order preserving group homomorphism
$\varphi\colon \mathcal{L}\ra \R$.
To see that $\varphi$ is modular (and a valuation),
note that 
\begin{equation*}
\min\{x,y\}+\max\{x,y\} \,=\, x+y\qquad(x,y\in \R).
\end{equation*}
So given $f,g\in \mathcal{L}$,
we have $f\wedge g + f \vee g = f+ g$,
and hence
\begin{equation*}
\varphi(f\wedge g) + \varphi(f\vee g) 
\,=\,\varphi(f\wedge g + f\vee g)
\,=\, \varphi(f+g)
\,=\, \varphi (f)+\varphi(g).
\end{equation*}
\end{ex}

In Example~\ref{E:int-val},
we saw a group homomorphism that is modular.
In fact any group homomorphism
on a lattice ordered Abelian group is modular
(see Corollary~\ref{C:hom-val}\ref{C:hom-val-group}).
To prove this,
we first derive some general properties
of ordered Abelian groups.
%
%                  PRESERVATION /\ BY +
%
\begin{lem}
\label{L:oag-plus-preserves}
Let $E$ be an ordered Abelian group.
Let $A\subseteq E$ and $x\in E$ be given.
\begin{enumerate}
\item \label{L:oag-plus-preserves-meet}
If $A$ has an infimum,
then so has $x+A \eqdf \{ x+a\colon a\in A\}$,
and 
\begin{equation*}
\bw \,\,x+A \ =\  x+\bw A.
\end{equation*}
\item \label{L:oag-plus-preserves-join}
If $A$ has a supremum,
then so has $x+A$,
and 
\begin{equation*}
\bv \,\,x+A \ =\  x+\bv A.
\end{equation*}
\end{enumerate}
\end{lem}
\begin{proof}
It suffices to prove that the map $E\ra E$
given by $u\mapsto x + u$ is an order isomorphism.
Of course,
it is: $u\leq v\iff x+u\leq x+v$ for all $u,v\in E$.
\end{proof}
%
%                  PRESERVATION OF /\ BY -
%
\begin{lem}
\label{L:oag-minus-preserves}
Let $E$ be an ordered Abelian group,
and $A\subseteq E$.
\begin{enumerate}
\item
If $A$ has an infimum,
then $-A\eqdf \{-a\colon a\in A\}$
has a supremum,
and 
\begin{equation*}
-\bw A \,=\, \bv -\hspace{-3pt}A.
\end{equation*}
\item
If $A$ has an supremum,
then $-A$
has an infimum, and
\begin{equation*}
-\bv A \,=\, \bw -\hspace{-3pt}A.
\end{equation*}
\end{enumerate}
\end{lem}
\begin{proof}
The map $E\rightarrow E$ given by
$u\mapsto u$ is an order reversing isomorphism.
\end{proof}
%
%                  MODULARITY EQUATION FOR LATTICE ORDERED ABELIAN GROUPS
%
\begin{lem}
\label{L:1-valuation}
Let $R$ be a lattice ordered Abelian group.
Then we have 
\begin{equation*}
a\wedge b  + a\vee b \,=\, a+b \qquad(a,b\in R).
\end{equation*}
\end{lem}
\begin{proof}
$a\vee b - a - b
= (a - a - b) \vee (b - a - b)
= (-b)\vee(-a) = -(a\wedge b)$.
\end{proof}

\begin{ex}
\label{E:1-valuation}
Let~$R$ be a lattice ordered Abelian group.
Then the identity map $1_R$ is a valuation.
Indeed, $1_R$ is modular by Lemma~\ref{L:1-valuation},
and clearly order preserving.
\end{ex}

\begin{lem}
\label{L:mod-comp}
Suppose we have the following situation
\begin{equation*}
\xymatrix{
L' \ar[r]^f&
L \ar[r]^\varphi&
E \ar[r]^g&
E',
}
\end{equation*}
where $L$, $L'$ are lattices,
$E$, $E'$ are ordered Abelian groups,
$f$ is a lattice homomorphism,
$\varphi$ a map,
and $g$ is a group homomorphism.
Then
\begin{enumerate}
\item
\label{L:mod-comp-mod}
$g\circ \varphi \circ f$ is modular
provided that $\varphi$ is modular;
\item
\label{L:mod-comp-val}
$g\circ \varphi \circ f$ is a valuation
provided that $\varphi$ is a valuation
and~$g$ is positive.
\end{enumerate}
\end{lem}
\begin{proof}
\noindent
\ref{L:mod-comp-mod}
\  Suppose~$\varphi$ is modular.
Let $a,b\in L'$ be given.
Writing $\varphi'= g\circ\varphi \circ f$,
we need to prove that
$\varphi'(a\wedge b)+\varphi'(a\vee b)=\varphi'(a)+\varphi'(b)$.
We have
\begin{alignat*}{3}
\varphi'(a) + \varphi'(b)
\ &=\ g(\varphi(f(a))) \,+\, g(\varphi(f(b))) \\
  &=\ g(\ \varphi( f(a)) + \varphi( f(b))\ ) \\
  &=\ g(\ \varphi(f(a)\wedge f(b)) + \varphi(f(a)\vee f(b))\ ) \\
  &=\ g(\  \varphi(f(a\wedge b)) \,+\, \varphi(f(a\vee b))\ ) \\
  &=\ g(\varphi(f(a\wedge b))) \,+\, g(\varphi(f(a\vee b))) \\ 
  &=\ \varphi'(a\wedge b) + \varphi'(a \vee b)
\end{alignat*}
\ref{L:mod-comp-val}
\  Suppose~$\varphi$ is a valuation
and~$g$ is positive.
We need to prove that~$\varphi'\eqdf g\circ \varphi\circ f$
is a valuation.
By part~\ref{L:mod-comp-mod}
we know that~$\varphi'$ is modular.
It remains to be shown that~$\varphi'$ is order preserving.
This is easy: $g$, $\varphi$, and~$f$ are all order preserving.
So $\varphi'=g\circ\varphi\circ f$ must be order preserving too.
\end{proof}

\begin{cor}
\label{C:hom-val}
Let~$R$ be a lattice ordered Abelian group.
\begin{enumerate}
\item
\label{C:hom-val-lat}
Let~$L$ be a lattice.
Any lattice homomorphism $f\colon L\ra R$ 
is a valuation;

\item
\label{C:hom-val-group}
Let $E$ be an ordered Abelian group
and $g\colon R\ra E$ a group homomorphism.
Then $g$ is modular.
Moreover,
if~$g$ is positive,
then~$g$ is a valuation.
\end{enumerate}
\end{cor}
\begin{proof}
Apply Lemma~\ref{L:mod-comp} to the following situations.
\begin{equation*}
\xymatrix{
L\ar[r]^f &
R\ar[r]^{1_R} &
R\ar[r]^{1_R} &
R &&
R\ar[r]^{1_R} &
R\ar[r]^{1_R} &
R\ar[r]^{g} &
E}
\end{equation*}
(Recall that $1_R$ is a valuation,
see Example~\ref{E:1-valuation}.)
\end{proof}


\begin{ex}
Let $C$ be a chain,
i.e. a totally ordered set.
Then $C$ is a lattice with
\begin{equation*}
a\wedge b = \min\{a,b\},
 \qquad 
a\vee b = \max\{a,b\}.
\end{equation*}
One quickly sees that
\emph{any map $f\colon C\rightarrow E$
to an ordered Abelian group is modular.}
\end{ex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%j%
%
%
%                  ELEMENTARY PROPERTIES
%                     of valuations
%
%
\subsection{Distance induced by a valuation}
Fix a lattice~$L$,
an ordered Abelian group~$E$
and a valuation~$\varphi\colon L\ra E$.
In this subsection,
we derive some elementary properties of~$\varphi$.
Most of these are concerned with the following notion
of distance.
\begin{dfn}
\label{D:d}
\quad
$\ld\varphi(a,b)\eqdf \varphi(a\vee b) - \varphi(a \wedge b)$
\quad
for all $a,b\in L$.
\end{dfn}
\begin{lem}
\label{L:d-metric}
We have:
\begin{enumerate}
\item\label{d-metric_self} 
$\ld\varphi(a,a)=0$ for all $a\in L$.
\item\label{d-metric_sym}
$\ld\varphi(a,b)=\ld\varphi(b,a)$ for all $a,b\in L$.
\item\label{d-metric_triangle}
$\ld\varphi(a,b)\leq\ld\varphi(a,z)+\varphi(z,b)$
for all $a,b,z\in L$.
\end{enumerate}
\end{lem}
\begin{proof}
Only point~\ref{d-metric_triangle} requires some work.
Let $a,b,z\in L$ be given.
We want to show that $\ld\varphi(a,b) \leq \ld\varphi(a,z)+\ld\varphi(z,b)$.
In other words:
\begin{equation}
\label{eq:d-metric}
\varphi(a\vee b) + \varphi(a\wedge z) + \varphi (z\wedge b)
\ \leq\ 
\varphi (a\vee z) + \varphi(z\vee b) + \varphi (a\wedge b)\text{.}
\end{equation}
By modularity,
the left-hand side equals
\begin{equation*}
\varphi(a\vee b) 
 + \varphi(\,(a\wedge z)\vee(b\wedge z)\,)
 + \varphi(a\wedge b\wedge z).
\end{equation*}
On the other hand,
using modularity
the right-hand side of Inequality~\eqref{eq:d-metric} becomes
\begin{equation*}
\varphi(a\vee b\vee z)
 + \varphi(\,(a\vee z)\wedge(b\vee z)\,)
 + \varphi(a\wedge b).
\end{equation*}
Note that $a\vee b \leq a\vee b\vee z$,
and $(a\wedge z)\vee (b\wedge z) \leq z \leq (a\vee z)\wedge (b\vee z)$,
and $a\wedge b\wedge z \leq a\wedge b$,
so that the monotonicity of~$\varphi$ yields Inequality~\eqref{eq:d-metric}.
\end{proof}
%
%                  CURRY-WC-UNIF
%
\begin{lem}
\label{L:curry-wc-unif}
\quad
$\ld\varphi(a\wedge z,\,b\wedge z)+
 \ld\varphi(a\vee z,b\vee z)\,\leq\,\ld\varphi(a,b)$
\quad for all $a,b,z\in L$.
\end{lem}
\begin{proof}
By expanding Definition~\ref{D:d},
we see that 
we need to prove that
\begin{equation}
\label{eq:curry-wc-unif}
\begin{split}
\varphi(a\vee b\vee z) \,+\,
\varphi(\,(a\wedge z)\vee(b\wedge z)\,) & \,+\,
\varphi(a\wedge b) \\
\ \leq\ 
\varphi(a \vee b)  \,+\, &
\varphi(\,(a\vee z)\wedge(b\vee z)\,) \,+\,
\varphi(a\wedge b \wedge z)
\end{split}
\end{equation}
By modularity,
the left-hand side equals
\begin{equation*}
\varphi(a\vee b \vee z) \,+\,
\varphi(\, (a\wedge z) \vee (b\wedge z) \vee (a\wedge b)\,) \,+\,
\varphi(\,a\wedge b\wedge ( (a \wedge z) \vee (b\wedge z) )\,).
\end{equation*}
To simplify the above expression,
we prove that
$a\wedge b\wedge ( (a \wedge z) \vee (b\wedge z)=a\wedge b\wedge z$.
To this end, note that
$a\wedge z \,\leq\, (a\wedge z)\vee (b\wedge z) \leq z$
so that 
\begin{equation*}
a\wedge b\wedge z
\, =\, a\wedge b \wedge (a\wedge z)
\,\leq\, a\wedge b \wedge ((a\wedge z)\vee (b\wedge z))
\,\leq\, a\wedge b \wedge z.
\end{equation*}
Hence the left-hand side of Inequality~\eqref{eq:curry-wc-unif}
equals
\begin{equation*}
\varphi(a\vee b \vee z) \,+\,
\varphi(\, (a\wedge z) \vee (b\wedge z) \vee (a\wedge b)\,) \,+\,
\varphi(\,a\wedge b\wedge z\,).
\end{equation*}
In a similar fashion,
one can show that the right-hand side of Inequality~\eqref{eq:curry-wc-unif}
equals
\begin{equation*}
\varphi(a\vee b \vee z) \,+\,
\varphi(\, (a\vee z) \wedge (b\vee z) \wedge (a\vee b)\,) \,+\,
\varphi(\,a\wedge b\wedge z\,).
\end{equation*}
So in order to prove Inequality~\eqref{eq:curry-wc-unif},
we must show that
\begin{equation*}
\varphi(\, (a\wedge z) \vee (b\wedge z) \vee (a\wedge b)\,) 
\ \leq\ 
\varphi(\, (a\vee z) \wedge (b\vee z) \wedge (a\vee b)\,).
\end{equation*}
Since $\varphi$ is order preserving,
it suffices to show that 
\begin{equation*}
 (a\wedge z) \vee (b\wedge z) \vee (a\wedge b)
\ \leq\ 
  (a\vee z) \wedge (b\vee z) \wedge (a\vee b).
\end{equation*}
Writing $c_1 = a$, $c_2 = b$, and $c_3 = z$,
we must prove that 
\begin{equation*}
\bv_{i\neq j}\, c_i \wedge c_j \ \leq\ \bw_{k\neq \ell}\, c_k \vee c_\ell.
\end{equation*}
That is,
we must show that 
$c_i \wedge c_j \leq c_k \vee c_\ell$
for given $i\neq j$ and $k\neq \ell$.
Now, note
\begin{equation*}
\# (\{ i,j \} \cap \{ k,\ell\}) + \#\{i,j,k,\ell\}
\ = \ \# \{i,j\} + \# \{k,\ell \}
\ = \ 4.
\end{equation*}
Since  $\# \{ i,j,k,\ell \}\leq 3$,
we see that $\# \{ i,j \} \cap \{ k,\ell\} \geq 1$.
So pick $m\in  \{ i,j \} \cap \{ k,\ell\}$.
Then $c_i \wedge c_j \leq c_m \leq c_k \vee c_\ell$.
\end{proof}
%
%                  WC-UNIF
%
\begin{lem}
\label{L:wv-unif}
Let $a,b,w,z\in L$.  Then:
\begin{equation*}
\ld\varphi(a\wedge w,b\wedge z) + \ld\varphi(a \vee w,b\vee z)
\ \leq\ 
\ld\varphi(a,b) + \ld\varphi(w,z).
\end{equation*}
\end{lem}
\begin{proof}
By the triangle inequality (point~\ref{d-metric_triangle}
of Lemma~\ref{L:d-metric}),
we have
\begin{equation}
\label{eq:L:d-metric-1}
\begin{alignedat}{3}
\ld\varphi(a\wedge w,\,b\wedge z)\ &\leq\ 
\ld\varphi(a\wedge w,\,b\wedge w)\,+\,
\ld\varphi(b\wedge w,\,b\wedge z), \\
\ld\varphi(a\vee w,\,b\vee z)\ &\leq\ 
\ld\varphi(a\vee w,\,b\vee w)\,+\,
\ld\varphi(b\vee w,\,b\vee z).
\end{alignedat}
\end{equation}
On the other hand, Lemma~\ref{L:curry-wc-unif} gives us
\begin{equation}
\label{eq:L:d-metric-2}
\begin{alignedat}{3}
\ld\varphi(a\wedge w,b\wedge w) + \ld\varphi(a\vee w,b\vee w)
   \ &\leq\ \ld\varphi(a,b), \\
\ld\varphi(b\wedge w,b\wedge z) + \ld\varphi(b\vee w, b\vee z)
   \ &\leq\ \ld\varphi(w,z).
\end{alignedat}
\end{equation}
The sum of the right-hand sides of Equation~\eqref{eq:L:d-metric-1}
equals the sum of the left-hand sides of Equation~\eqref{eq:L:d-metric-2}.
Hence
$\ld\varphi(a\wedge w,b\wedge z) + \ld\varphi(a \vee w,b\vee z)
\leq 
\ld\varphi(a,b) + \ld\varphi(w,z)$.
\end{proof}
%
%                  LEMMA ON MODULARITY FOR MODULAR MAPS
%
\begin{lem}
\label{L:modular-map-modular}
For $\ell,u\in L$ with $\ell\leq u$, we have
\begin{equation}
\label{eq:modular-map}
\varphi(\,\ell \vee (a \wedge u)\,) 
\ =\ 
\varphi(\,(\ell\vee a)\wedge u\,)
\qquad (a\in L).
\end{equation}
\begin{proof}
The trick is to consider the expression 
$\varphi(\ell) + \varphi(a) + \varphi(u)$.
On the one hand,
\begin{align*}
\varphi(\ell) + \varphi(a) + \varphi(u)
\ &=\ \varphi(\ell\wedge a) + \varphi(\ell \vee a) + \varphi(u) \\
\ &=\ \varphi(\ell \wedge a)
      + \varphi(\,(\ell\vee a)\wedge u\,)
      + \varphi(a\vee u),
\end{align*}
where we have used modularity twice.
On the other hand,
\begin{align*}
\varphi(\ell) + \varphi(a) + \varphi(u)
\ &=\ \varphi(\ell) + \varphi(a\wedge u) + \varphi(a \vee u) \\
\ &=\ \varphi(\ell \wedge a)
      + \varphi(\,\ell\vee (a\wedge u)\,)
      + \varphi(a\vee u).
\end{align*}
The difference,
$\varphi(\,(\ell\vee a)\wedge u\,)
- \varphi(\,\ell\vee (a\wedge u)\,)$,
must be zero.
\end{proof}
\end{lem}



\section{Valuation systems}
\subsection{Simple valuation systems}
%
%                  SYSTEMS
%
\begin{dfn}
\label{D:simple-system}
We say $\vs{V}{L}{\varphi}{E}$
 is a \keyword{simple valuation system}
provided that
\begin{enumerate}
\item \label{D:simple-system-1}
$V$ is a lattice
such that $\bw_n c_n$ and $\bv_n c_n$ exists for all~$c_1,c_2,\dotsc\in V$;
\item \label{D:simple-system-2}
$L$ is a sublattice of~$V$;
\item \label{D:simple-system-3}
$E$ is an ordered Abelian group;
\item \label{D:simple-system-4}
$\varphi\colon L\ra E$ is a valuation.
\end{enumerate}
\end{dfn}

\begin{ex}
\label{E:ring-system}
Let~$X$ be a set, 
$\mathcal{A}$ a ring of sets,
and $\mu\colon \mathcal{A}\ra \R$
a positive and additive map.
Then we have the following simple valuation system:
\begin{equation*}
\vs{\wp X}{\mathcal{A}}\mu{\R}
\end{equation*}
Indeed, $\wp X$ is lattice with 
$\bw_n A_n = \bigcap_n A_n$
and $\bv_n A_n = \bigcup_n A_n$ for all $A_i \in \wp X$,
$\mathcal{A}$ is a sublattice of~$\wp X$
by definition,
$\R$ is an ordered Abelian group,
and we have already seen in Example~\ref{E:ring-val}
that $\mu\colon \mathcal{A}\ra \R$ is a valuation.
\end{ex}

\begin{ex}
Let $\mathcal{S}$ be the set of all finite intervals of~$\R$,
\begin{equation*}
(a,b)\qquad [a,b)\qquad (a,b]\qquad [a,b]
\qquad\qquad\text{where }a<b
\end{equation*}
Let~$\mathcal{R}_\mathrm{L}$ be the ring generated by~$\mathcal{S}$.
Every element~$A$ of~$\mathcal{R}_\mathrm{L}$ is of the form
\begin{equation*}
I_1 \cup \dotsb \cup I_N
\end{equation*}
where $I_1,\dotsc,I_N\in \mathcal{R}_\mathrm{L}$
are disjoint.
Let $\sigma(A)$ be given by
\begin{equation*}
\sigma(A) \ \eqdf\  |I_1| + \dotsb + |I_N|.
\end{equation*}
One can verify that the number $\sigma(A)$
only depends on~$A$ and not on the choice of~$I_1,\dotsc,I_N$.
Hence we obtain a map~$\sigma\colon \mathcal{R}_\mathrm{L} \ra \R$.
Almost by definition $\sigma$ is additive and positive.
So $\sigma$ is a valuation 
(see Example~\ref{E:ring-val}).

Hence $\vs{\wp \R}{\mathcal{R}_\mathrm{L}}{\sigma}{\R}$
is a simple valuation system.
\end{ex}

\todo{Add more examples of systems}

\begin{nt}
Let $\vs{V}{L}\varphi{E}$ be a simple valuation system.
Let $a_1, a_2, \dotsc$ be from~$L$.
Then $a_1, a_2,\dotsc$ has a supremum
in~$V$ and might have a supremum in~$L$.
We ignore the latter:
\emph{With $\bv_n a_n$
we always mean the supremum of~$a_1, a_2,\dotsc $ in~$V$}.
\end{nt}

\subsection{Completeness}
%
%                  COMPLETE SYSTEMS
%
\begin{dfn}
Let $\vs{V}{L}\varphi{E}$ be a simple valuation system.

Consider a sequence
$a_1 \geq a_2 \geq \dotsb$ from~$L$.
We say
\begin{equation*}
a_1 \geq a_2 \geq \dotsb \text{ is \keyword{$\varphi$-convergent}}
\qquad\text{if}\qquad \bw_n \varphi(a_n)\text{ exists.}
\end{equation*}

Similarly,
if
$b_1 \leq b_2 \leq \dotsb$ is
a sequence in~$L$, then 
\begin{equation*}
b_1 \leq b_2 \leq \dotsb \text{ is \keyword{$\varphi$-convergent}}
\qquad\text{if}\qquad \bv_n \varphi(b_n)\text{ exists.}
\end{equation*}
\end{dfn}
%
%                  COMPLETE VALUATION
%
\begin{dfn}
\label{D:system-complete}
A simple valuation system 
$\vs{V}{L}\varphi{E}$ is \keyword{complete} provided that
\begin{alignat*}{5}
a_1 \geq a_2 \geq \dotsb \text{$\varphi$-convergent }
  \quad &\implies \quad 
  & \bw_n a_n &\in L\quad 
  &&\text{and}\quad
  &\varphi(\,\bw_n a_n\,) &= \bw_n \varphi(a_n); \\
b_1 \leq b_2 \leq \dotsb \text{$\varphi$-convergent }
  \quad &\implies \quad 
  & \bv_n b_n &\in L\quad 
  &&\text{and}\quad
  &\varphi(\,\bv_n b_n\,) &= \bv_n \varphi(b_n).
\end{alignat*}
\end{dfn}

\todo{Add examples of complete systems}

\subsection{$\sigma$-distributivity and $R$-completeness}
We would like to
extend a given simple valuation system to a complete one.
To make the theory work,
we concern ourselves only with certain
simple valuation systems,
which we just call ``valuation systems'' (see Definition~\ref{D:system}).
%
%                  ADDITIONAL RESTRICIONS ON THE SYSTE
% 
\begin{dfn}
\label{D:sigma-distributive}
Let~$V$ be a lattice.
We say~$V$ is
\keyword{$\sigma$-distributive}
provided that
\begin{alignat*}{3}
\bw_n c_n\text{ exists} \quad&\implies\quad
&a \vee \bw_n c_n \,&=\, \bw_n\  a\vee c_n, \\
\bv_n c_n\text{ exists} \quad&\implies\quad
&a \wedge \bv_n c_n \,&=\, \bv_n\  a\wedge c_n,
\end{alignat*}
where $a,\,c_1,c_2,\dotsc\in V$.
\end{dfn}
\begin{exs}
\begin{enumerate}
\item
Let $X$ be a set. Then $\wp(X)$ is $\sigma$-distributive.
Indeed,  
\begin{equation*}
\textstyle{
A \cup \bigcap_n C_n \,=\, \bigcap_n A \cup C_n
\qquad
A\cap \bigcup_n C_n \,=\, \bigcup_n A \cap C_n}
\end{equation*}
for all $A,\, C_1,C_2,\dotsc \subseteq X$.
Moreover,
we have already seen
that~$\wp(X)$ satisfies condition~\ref{D:simple-system-1}
of Definition~\ref{D:simple-system}
(see Example~\ref{E:ring-system}).
\item
Let $C$ be totally ordered. Then $C$ is $\sigma$-distributive.

Indeed,
let $a,\,c_1,c_2,\dotsc \in C$ be such that $\bw_n c_n$
exists. We need to prove that $a \vee \bw_n c_n$
is the supremum of~$a\vee c_1,\,a\vee c_2,\,\dotsc$.
To this end note that 
\begin{equation*}
b \leq d_1 \vee d_2 \quad\iff\quad 
b\leq d_1\quad\text{or}\quad b\leq d_2
\qquad\quad(b,d_i\in C).
\end{equation*}
(To see this, recall that $d_1 \vee d_2 = \max\{d_1,d_2\}$.)
Now, for $\ell \in C$, we have
\begin{alignat*}{3}
\forall n [\ \ell \leq a \vee c_n \ ]
\quad&\iff\quad
\ell \leq a
    \quad\text{or}\quad
    \forall n[\ \ell \leq c_n\ ] \\
\quad&\iff\quad
\ell \leq a
    \quad\text{or}\quad
    \ell \leq \bw_n c_n \\
\quad&\iff\quad
\ell \leq a\vee \bw_n c_n.
\end{alignat*}
So we see 
that $a\vee\bw_n c_n$ is the greatest 
lower bound of~$a\vee c_1,\,a\vee c_2\,\dotsc$.

With the same argument,
one can prove that $a \wedge \bv_n c_n = \bv a \wedge c_n$
for all $a,\,c_1,c_2,\dotsc \in C$
such that $\bv_n c_n$ exists.
Hence $C$ is $\sigma$-distributive.

\item
The lattice of the real numbers~$\R$ is a chain
and hence $\sigma$-distributive.

However,
$\R$ does not satisfy condition~\ref{D:simple-system-1}
of Definition~\ref{D:simple-system}.
Indeed,
a sequence $c_1,c_2,\dotsc$ in~$\R$ has a supremum
if and only if it is bounded from above,
i.e. there is an~$a\in \R$ such that $c_n \leq a$
for all~$n$.
Similarly,
a sequence
$c_1,c_2,\dotsc\in \R$ has an infimum
if and only if it is bounded from below.

\item
Let $\E$ be the lattice of the extended real numbers.
Then $\E$ is a chain and hence $\sigma$-distributive.
Moreover,
$\E$ also satisfies condition~\ref{D:simple-system-1}
of Definition~\ref{D:simple-system}.

\item
Let $I$ be a set,
and for each~$i\in I$,
let $L_i$ be a $\sigma$-distributive lattice.
Then the product $L\eqdf \prod_{i\in I} L_i$
is $\sigma$-distributive.
Moreover,
if $L_i$ satisfies condition~\ref{D:simple-system-1}
of Definition~\ref{D:simple-system}
for every~$i\in I$,
then $L$ satisfies condition~\ref{D:simple-system-1}
of Definition~\ref{D:simple-system}.

\item
Let $X$ be a set.
Then lattice $\EX$ of functions from~$X$ to~$\E$
is $\sigma$-distributive and satisfies
condition~\ref{D:simple-system-1}
of Definition~\ref{D:simple-system}.
\end{enumerate}
\end{exs}
%
%                  R-completeness
%
\begin{dfn}
\label{D:R-complete}
Let $E$ be an ordered Abelian group.
Consider the following.
\begin{equation*}
\left[\quad 
\begin{minipage}{.7\columnwidth}
Let $x_1 \leq x_2 \leq \dotsb$
and $y_1 \leq y_2 \leq \dotsb$ be from~$E$
such that
\begin{equation*}
x_{n+1} - x_n \ \leq\ y_{n+1} - y_n\qquad \text{for all }n.
\end{equation*}
Then $\bv x_n $ exists whenever $\bv y_n$ exists.
\end{minipage}
\right.
\end{equation*}
If the above statement holds,
we say~$E$ is \keyword{$R$-complete}.
\end{dfn}

\begin{exs}
\begin{enumerate}
\item
Any $\sigma$-Dedekind complete Riesz space is $R$-complete.

\item
In particular, $\R$ is $R$-complete.

\item
The lexicographic plane~$\Lex$ (see Definition~\todo{add reference})
is $R$-complete,
but~$\Lex$ is not $\sigma$-Dedekind complete.
\end{enumerate}
\end{exs}

\begin{rem}
Let~$E$ be an ordered Abelian group.
Using the map $x\mapsto -x$,
one can easily verify
that $E$ is $R$-complete
if and only if the following statement holds.
\begin{equation*}
\left[\quad 
\begin{minipage}{.7\columnwidth}
Let $x_1 \geq x_2 \geq \dotsb$
and $y_1 \geq y_2 \geq \dotsb$ be from~$E$
such that
\begin{equation*}
x_{n} - x_{n+1}\ \leq\ y_{n} - y_{n+1}\qquad \text{for all }n.
\end{equation*}
Then $\bw y_n $ exists implies that $\bw x_n$ exists.
\end{minipage}
\right.
\end{equation*}
\end{rem}

\begin{prop}
\label{P:R-main}
Let  $E$ be an ordered Abelian group which is $R$-complete.
Let~$L$ be a lattice and $\varphi\colon L \ra E$ a valuation.
\begin{enumerate}
\item
\label{P:R-main-descending}
If  $a_1 \geq a_2 \geq \dotsb$,
$b_1 \geq b_2 \geq \dotsb$
are  $\varphi$-convergent
sequences from~$L$,
then
\begin{equation*}
a_1 \wedge b_1 \,\geq\, a_2 \wedge b_2 \,\geq\, \dotsb
\qquad\text{and}\qquad
a_1 \vee b_1 \,\geq\, a_2 \vee b_2 \,\geq\, \dotsb
\end{equation*}
are $\varphi$-convergent.

\item
\label{P:R-main-ascending}
If  $a_1 \leq a_2 \leq \dotsb$,
$b_1 \leq b_2 \leq \dotsb$
are  $\varphi$-convergent
sequences from~$L$,
then
\begin{equation*}
a_1 \wedge b_1 \,\leq\, a_2 \wedge b_2 \,\leq\, \dotsb
\qquad\text{and}\qquad
a_1 \vee b_1 \,\leq\, a_2 \vee b_2 \,\leq\, \dotsb
\end{equation*}
are $\varphi$-convergent.
\end{enumerate}
\end{prop}
\begin{proof}
\ref{P:R-main-descending}\ 
We prove that $a_1 \wedge b_1 \geq a_2 \wedge b_2 \geq\dotsb$
is $\varphi$-convergent.
For this we need to show that $\bw_n \varphi(a_n\wedge b_n)$ exists.
Note that since $\bw_n \varphi (a_n)$
and $\bw_n \varphi(b_n)$ exist,
we know that $\bw_n \ (\varphi(a_n) + \varphi(b_n))$
exists (see Lemma~??).
So by $R$-completeness,
in order to show $\bw_n\varphi(a_n \wedge b_n)$ exists,
it suffices to prove that 
\begin{equation*}
\varphi(a_{n}\wedge b_{n}) \,-\, \varphi(a_{n+1} \wedge b_{n+1}) 
\ \leq\ 
(\,\varphi(a_{n}) + \varphi(b_{n})\,) 
\,-\, (\,\varphi(a_{n+1}) + \varphi(b_{n+1})\,).
\end{equation*}
Phrased differently
using the distance ``$d_\varphi$'',
we need to prove that
\begin{equation*}
d_\varphi(a_{n}\wedge b_{n},\, a_{n+1} \wedge b_{n+1}) 
\ \leq\ 
d_\varphi(a_{n},a_{n+1}) + d_\varphi(b_{n},b_{n+1}).
\end{equation*}
This follows immediately from Lemma~\ref{L:wv-unif}.

The 
proof that~$a_1 \vee b_1 \geq a_2 \vee b_2 \geq \dotsb$
is $\varphi$-convergent is similar.

\ref{P:R-main-ascending}.  Again, similar.
\end{proof}

\subsection{Valuation systems}
\begin{dfn}
\label{D:system}
A \keyword{valuation system} $\vs{V}{L}\varphi{E}$
is a simple valuation system
for which~$V$ is $\sigma$-distributive
and $E$ is $R$-complete.
\end{dfn}
\todo{Add examples of valuation systems.}

For the following it is convenient to `split' the notion
of complete valuation.
\begin{dfn}
\label{D:system-complete2}
Let $\vs{V}{L}\varphi{E}$ be
a valuation system.
\begin{enumerate}
\item
\label{D:system-complete2-pi}
We say $\vs{V}{L}\varphi{E}$ is \keyword{$\Pi$-complete}
provided that
\begin{alignat*}{5}
a_1 \geq a_2 \geq \dotsb \text{$\varphi$-convergent }
  \quad &\implies \quad 
  & \bw_n a_n &\in L\quad 
  &&\text{and}\quad
  &\varphi(\,\bw_n a_n\,) &= \bw_n \varphi(a_n). 
\end{alignat*}
\item
We say $\vs{V}{L}\varphi{E}$ is \keyword{$\Sigma$-complete}
provided that
\begin{alignat*}{5}
b_1 \leq b_2 \leq \dotsb \text{$\varphi$-convergent }
  \quad &\implies \quad 
  & \bv_n b_n &\in L\quad 
  &&\text{and}\quad
  &\varphi(\,\bv_n b_n\,) &= \bv_n \varphi(b_n). 
\end{alignat*}

\end{enumerate}
\end{dfn}

%
%                     PI L
%

\subsection{The $\Pi$-extension}
Let $\vs{V}{L}\varphi{E}$ be a valuation system.
Before we try to extend $\vs{V}{L}\varphi{E}$ to a complete
valuation system, 
we study whether $\vs{V}{L}\varphi{E}$
can be extended to a $\Pi$-complete valuation system.

\begin{dfn}
\label{D:PiL}
$\ \Pi L \ \eqdf \ \{ 
\bw_n a_n \colon \ \text{$\varphi$-convergent }
 a_1\geq a_2 \geq\dotsb \text{ from $L$} \}.$
\end{dfn}
%
%                  Pi(L) is lattice
%
\begin{lem}
\label{L:PiL-lattice}
$\Pi L$ is a sublattice of~$V$,
and $L$ is a sublattice of~$\Pi L$.
\end{lem}
\begin{proof}
We first prove that~$\Pi L$ is a sublattice of~$V$.
Let $a,b\in \Pi L$ be given;
we need to prove that $a\wedge b \in \Pi L$
and $a \vee b \in \Pi L$.
Choose $\varphi$-convergent 
$a_1 \geq a_2 \geq\dotsb$ and
$b_1 \geq b_2 \geq\dotsb$
with $a = \bw_n a_n$ and  $b=\bw_n b_n$.
Then $a_1 \wedge b_1 \geq a_2 \wedge b_2 \geq \dotsb$
is $\varphi$-convergent by Proposition~\ref{P:R-main},
and we have $\bw_n a_n \wedge b_n = a\wedge b$.
Hence $a\wedge b \in \Pi L$.
Similarly,
$a_1 \vee b_1 \geq a_2 \vee b_2 \geq \dotsb$
is $\varphi$-convergent by Proposition~\ref{P:R-main}
and
using $\sigma$-distributivity 
one can prove that $a \vee b  =\bw_n a_n \vee b_n$.
Hence $a\vee b \in \Pi L$.

To prove that~$L$ is a sublattice of~$\Pi L$,
we first note that~$L$ is a subset of~$\Pi L$.
Now,
since both $L$ and~$\Pi L$ are sublattices of~$V$,
and $L$ is a subset of~$\Pi L$,
we know that $L$ must be a sublattice of~$\Pi L$.
\end{proof}
\begin{rem}
In the proof of Lemma~\ref{L:PiL-lattice},
we have used the fact that~$V$ is $\sigma$-distrubutive
and the fact that~$E$ is $R$-complete
(via Proposition~\ref{P:R-main}).
\end{rem}

\begin{dfn}
\label{D:Pi-extendible}
We say~$\varphi$ is \keyword{$\Pi$-extendible}
if there is a valuation $\psi \colon \Pi L \ra E$ with
\begin{equation*}
\psi ( \bw_n a_n )
\ =\ 
\bw_n \varphi(a_n) 
\qquad
\text{ for all $\varphi$-convergent }
a_1 \geq a_2 \geq \dotsb.
\end{equation*}
Clearly,
there can be at most one such map~$\psi$;
if it exists, we denote it by 
\begin{equation*}
\Pi \varphi\colon \Pi L \ra E.
\end{equation*}
Finally,
note that if $\varphi$ is $\Pi$-extendible,
then $\Pi\varphi$ extends $\varphi$ (hence the name).
\end{dfn}
%
%                  PI EXTENDIBLE IMPLIES PI COMPLETE
%
\begin{lem}
\label{L:Pi-complete}
If $\varphi$ is $\Pi$-extendible,
then $\vs{V}{\Pi L}{\Pi\varphi}{E}$ is $\Pi$-complete.
\end{lem}
\begin{proof}
Let $a^1 \geq a^2 \geq \dotsb $ from $\Pi L$
be given and suppose  $\bw_n \Pi \varphi (a^n)$ exists;
we need to prove that $\bw_n a^n \in \Pi L$
and $\Pi\varphi(\bw_n a_n) = \bw_n \Pi \varphi(a_n )$.
To begin, write
$a^n = \bw_n a^n_m$
for each~$n$,
where $a^n_1 \geq a^n_2 \geq \dotsb$
is $\varphi$-convergent, and define
\begin{equation*}
b_i \ \eqdf\ \bw\{\,a^n_m\colon n,m\leq i \,\}.
\end{equation*}
Then $b_1 \geq b_2 \geq \dotsb$
and $\bw_n b_n = \bw_n a^n$.
Recall that  $\bw_n \Pi\varphi(a^n)$
exists.
We claim that $\bw_n \Pi\varphi(a^n)$
is the infimum of $\varphi b_1 \geq \varphi b_2 \geq \dotsb$.
If we can prove this, we are done.
Indeed,
then $b_1 \geq b_2 \geq\dotsb$ is $\varphi$-convergent,
so $\bw_n a^n = \bw_n b_n \in \Pi L$,
and
\begin{alignat*}{3}
\Pi\varphi( \bw_n a^n ) \ &=\  \Pi\varphi( \bw_n b_n )
 \qquad&& \text{since $\bw_n a^n = \bw_n b_n$}, \\
&=\ \bw_n \varphi (b_n)  
  && \text{since $\varphi$ is $\Pi$-extendible,}\\
&=\ \bw_n \Pi\varphi(a^n) 
  && \text{by the claim.}
\end{alignat*}

For each~$i$,
we have $b_i \geq \bw_{n\leq i} a^n = a^i$,
so $\varphi(b_i) = \Pi\varphi(b_i) \geq \Pi\varphi(a^i)$.
Hence we see that
$\bw_n \Pi\varphi(a^n)$ is a lower bound of
$\varphi(b_1)\geq \varphi(b_2) \geq \dotsb$.

On the other hand:
Let $\ell$ be a lower bound of $\varphi b_1 \geq \varphi b_2 \geq \dotsb$;
we need to prove that $\ell \leq \bw_n \Pi\varphi(a^n)$.
For all~$n$ and~$m$,
we have $a_m^n \geq b_{n\vee m}$
and so $\varphi(a_m^n) \geq \varphi(b_{n\vee m}) \geq \ell$.
Hence $\Pi\varphi(a^n) = \bw_m \varphi(a_m^n) \geq \ell$
for all~$n$.
So $\bw_n \Pi\varphi(a^n) \geq \ell$.

So $\bw_n \Pi\varphi(a^n)$ is the infimum of 
$\varphi b_1 \geq \varphi b_2 \geq \dotsb$,
and we are done.
\end{proof}
%
%                  MINIMALITY OF PI L
%
\begin{lem}
\label{L:Pi-minimal}
Let $C$ be a sublattice of~$V$.
Let $\psi\colon C\ra E$ be a valuation.
Assume
\begin{equation*}
\psi\text{ extends }\varphi
\qquad\text{and}\qquad
\vs{V}{C}\psi{E}\ \text{ is $\Pi$-complete.}
\end{equation*}
Then $\varphi$ is $\Pi$-extendible and
$\psi$ extends $\Pi\varphi$.
\end{lem}
\begin{proof}
Let $\varphi$-convergent $a_1 \geq a_2 \geq \dotsb$
be given.
We prove that
\begin{equation}
\label{eq:L:PiL-minimal}
\bw_n a_n \in C\qquad\text{and}\qquad \psi (\bw_n a_n) = \bw_n \varphi(a_n).
\end{equation}
We know that $\bw_n \varphi (a_n)$ exists
(since $a_1 \geq a_2 \geq \dotsb$ is $\varphi$-convergent),
and that $\varphi(a_n)= \psi(a_n)$
(since $\psi$ extends $\varphi$).
So $\bw_n \psi(a_n)$ exists too.
Hence $a_1 \geq a_2 \geq \dotsb$ is $\psi$-convergent.
Because $\vs{V}{C}\psi{E}$ is $\Pi$-complete
this implies that $\bw_n a_n \in C$ and 
$\psi (\bw_n a_n) = \bw_n \psi(a_n)$
(see Definition~\ref{D:system-complete2}\ref{D:system-complete2-pi}).
Hence we have proven Equation~\eqref{eq:L:PiL-minimal}.

Equation~\eqref{eq:L:PiL-minimal} implies that $\Pi L \subseteq C$.
So in order to prove that $\varphi$
is $\Pi$-extendible,
let us consider the valuation $\mu \eqdf \psi \,|\,\Pi L$.
We must prove that
$\mu(\bw_n a_n) = \bw_n \varphi(a_n)$
for every $\varphi$-convergent $a_1 \geq a_2 \geq \dotsb$
(see Definition~\ref{D:Pi-extendible}),
but this follows immediately from Equation~\eqref{eq:L:PiL-minimal}.
Hence $\varphi$ is $\Pi$-extendible.

Finally,
since we know that~$\varphi$ is $\Pi$-extendible,
we can talk about~$\Pi\varphi$,
and write the second part of
Equation~\eqref{eq:L:PiL-minimal}
as $\psi(\bw_n a_n) = \Pi \varphi(\bw_n a_n)$.
Hence $\psi$ extends $\Pi\varphi$.
\end{proof}
%
%                  MONOTONICITY OF PI
%
\begin{lem}
\label{L:Pi-monotonous}
Let $\vs{V}{K}\psi{E}$ be
a valuation system
such that $\psi$ extends $\varphi$.\\
Suppose that $\psi$ is $\Pi$-extendible.
Then $\varphi$ is $\Pi$-extendible
and  $\Pi\psi$ extends $\Pi\varphi$.
\end{lem}
\begin{proof}
Note that $\Pi\psi$ extends $\varphi$,
and $\vs{V}{\Pi K}{\Pi \psi}{E}$
is $\Pi$-complete (see Lemma~\ref{L:Pi-complete}).
So Lemma~\ref{L:Pi-minimal}
implies that
$\varphi$ is $\Pi$-extendible
and $\Pi\psi$ extends $\Pi\varphi$.
\end{proof}
%
%                  PI EXTENDIBLE IFF PI-CONTINUOUS
%
\begin{lem}
$\varphi$ is $\Pi$-extendible
if and only if  $\varphi$
has the following property.
\begin{equation}
\label{eq:Pi-cont}
\left[ \quad
\begin{minipage}{.7\columnwidth}
For every $b\in L$ and $\varphi$-convergent 
 $a_1 \geq a_2 \geq \dotsb$,
we have
\begin{equation*}
\bw_n a_n \leq b
\quad\implies\quad
\bw_n \varphi (a_n) \leq \varphi(b).
\end{equation*}
\end{minipage}
\right.
\end{equation}
\end{lem}
\begin{proof}
$\implies$\ 
Suppose $\varphi$ is $\Pi$-extendible.
Then $\varphi$ has Property~\eqref{eq:Pi-cont},
because if $b\in L$ and $\varphi$-convergent $a_1 \geq a_2 \geq \dotsb$
with $\bw_n a_n \leq b$ are given,
then we have
\begin{equation*}
\bw_n \varphi(a_n) 
\ =\ 
\Pi\varphi(\bw_n a_n)
\ \leq\ 
\varphi(b).
\end{equation*}

\noindent$\Longleftarrow$\ 
Suppose~$\varphi$ has Property~\eqref{eq:Pi-cont};
we prove $\varphi$ is $\Pi$-extendible.
We claim that
\begin{equation}
\label{eq:Piphi-order-preserving}
\bw_n a_n \ \leq\ \bw_n b_n 
\quad\implies\quad
\bw_n \varphi(a_n) \ \leq\ \bw_n \varphi(b_n),
\end{equation}
where $a_1 \geq a_2 \geq \dotsb$ and $b_1 \geq b_2 \geq \dotsb$
are $\varphi$-convergent.

Indeed,
if $\bw_n a_n \leq \bw_n b_n$,
then $\bw_n a_n \leq b_m$ for all~$m$,
so $\bw_n \varphi(a_n) \leq \varphi(b_m)$ for all~$m$
(by Property~\eqref{eq:Pi-cont}),
and hence $\bw_n \varphi(a_n) \leq \bw_n \varphi(b_m)$.

Equation~\eqref{eq:Piphi-order-preserving} implies that
 $\bw_n a_n = \bw_n b_n \implies \bw_n\varphi(a_n) = \bw_n \varphi(b_n)$,
so there is a unique map $\psi\colon \Pi L \ra E$ such that
\begin{equation*}
\psi(\bw_n a_n) \ =\ \bw_n \varphi(a_n)
\qquad
\text{ for all $\varphi$-convergent }a_1 \geq a_2 \geq \dotsb.
\end{equation*}
In fact, 
Equation~\eqref{eq:Piphi-order-preserving}
also implies that~$\psi$ is order preserving.

To prove that~$\varphi$ is $\Pi$-extendible
(see Definition~\ref{D:Pi-extendible}),
it suffices to show that~$\psi$ is a valuation.
For this,
it remains to be shown that~$\psi$ is modular
(see Definition~\ref{D:val}).

Let $a,b\in \Pi L$ be given; 
we need to prove $\psi(a\wedge b) + \psi(a\vee b)= \psi(a)+\psi(b)$.
Write  $a = \bw_n a_n$ and $b = \bw_n b_n$
where 
 $a_1 \geq a_2 \geq \dotsb$ and $b_1 \geq b_2 \geq \dotsb$
are $\varphi$-convergent sequences.
We have
\begin{alignat*}{3}
\varphi(a\wedge b) + \varphi(a \vee b) 
\ &=\ \psi(\bw_n a_n \wedge \bw_n b_n) + \psi(\bw_n a_n \vee \bw_n b_n) \\
\ &=\ \psi(\bw_n a_n \wedge b_n) + \psi(\bw a_n \vee b_n) \\
  &=\ \bw_n \varphi(a_n \wedge b_n) + \bw_n \varphi(\bw a_n \vee b_n) \\
  &=\ \bw_n \varphi(a_n \wedge b_n) + \varphi(a_n \vee b_n) \\
  &=\ \bw_n \varphi(a_n) + \varphi(b_n) \\
  &=\ \psi(\bw_n a_n) + \psi(\bw_n b_n).
\end{alignat*}
Hence $\psi$ is modular, which completes the proof
that $\varphi$ is $\Pi$-extendible.
\end{proof}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%j%
%
%                  THE HIERARCHY OF EXTENSIONS
%
\subsection{The Hierarchy of Extensions}
Let $\vs{V}{L}\varphi{E}$ be a valuation system.
\begin{dfn}
By recursion,
we are going to define 
several objects.
\begin{enumerate}
\item For each ordinal number~$\alpha$,
we define statements
\begin{equation*}
\text{``$\varphi$ is $\Pi_\alpha$-extendible''}
\qquad\text{ and }\qquad
\text{``$\varphi$ is $\Sigma_\alpha$-extendible''.}
\end{equation*}
\item
For each~$\alpha$ such that~$\varphi$ 
is $\Pi_\alpha$-extendible,
we define a valuation system 
\begin{equation*}
\vs{V}{\Pi_\alpha L}{\Pi_\alpha \varphi}{E},
\end{equation*}

\item
and for each~$\alpha$ such that~$\varphi$ is $\Sigma_\alpha$-extendible,
we define a valuation system 
\begin{equation*}
\vs{V}{\Sigma_\alpha L}{\Sigma_\alpha \varphi}{E}.
\end{equation*}
\end{enumerate}
We will do this in such a way that
for every ordinal number $\gamma$, we have:
\begin{multicols}{2}
\begin{enumerate}[label=(\Roman*)]
\item\label{req:hierarchy-A}
If  $\varphi$ is $\Pi_\gamma$-extendible
and $\beta<\gamma$,
then $\varphi$ is $\Pi_\beta$-extendible and $\Sigma_\beta$-extendible
and the map $\Pi_\gamma\varphi$ extends 
both $\Pi_\beta\varphi$ and $\Sigma_\beta\varphi$.
\\
\item\label{req:hierarchy-B}
If $\varphi$ is $\Sigma_\gamma$-extendible
and $\beta<\gamma$
then $\varphi$ is $\Pi_\beta$-extendible and $\Sigma_\beta$-extendible
and the map $\Sigma_\gamma\varphi$ extends 
both $\Pi_\beta\varphi$ and $\Sigma_\beta\varphi$.
\\
\item\label{req:hierarchy-C}
If $\gamma=0$ or $\gamma$ is a limit ordinal,
then $\varphi$ is $\Pi_\gamma$-extendible
if and only if $\varphi$ is $\Sigma_\gamma$-extendible,
and if $\varphi$ is $\Pi_\gamma$-extendible,
then $\Pi_\gamma\varphi = \Sigma_\gamma\varphi$.
\end{enumerate}
\vspace{-2em}
\begin{equation*}
\xymatrix@=2pt{
 \vdots& \vdots& \vdots \\
& & \\
\Pi_{\omega+1} \varphi\ar@{-}[u]\ar@{-}[ru] 
   && \Sigma_{\omega+1} \varphi \ar@{-}[u]\ar@{-}[lu]\\
& & \\
\Pi_\omega \varphi\ar@{-}[uu]\ar@{=}[rr]\ar@{-}[rruu] 
   && \Sigma_\omega \varphi \ar@{-}[uu]\ar@{-}[lluu]\\
 \vdots& \vdots& \vdots \\
& & \\
\Pi_3 \varphi\ar@{-}[u]\ar@{-}[ru] && \Sigma_3 \varphi \ar@{-}[u]\ar@{-}[lu]\\
& & \\
\Pi_2 \varphi\ar@{-}[uu]\ar@{-}[rruu] && \Sigma_2 
\varphi \ar@{-}[uu]\ar@{-}[lluu]\\
& & \\
\Pi \varphi\ar@{-}[uu]\ar@{-}[rruu] && \Sigma \varphi \ar@{-}[uu]\ar@{-}[lluu]\\
& \varphi\ar@{-}[ru]\ar@{-}[lu]  &&
}
\end{equation*}
\vspace{-1em}
\end{multicols}
\vspace{-1em}
Indeed,
the definition is given by the following clauses.
\begin{enumerate}
\item
Let $\varphi$ is \keyword{$\Pi_0$-extendible}
and $\varphi$ is \keyword{$\Sigma_0$-extendible} be true.
Define
\begin{equation*}
\Pi_0 L \eqdf L\qquad 
\Sigma_0 L \eqdf L \qquad 
\Pi_0 \varphi \eqdf \varphi \qquad
\Sigma_0 \varphi \eqdf \varphi.
\end{equation*}

\item
Let $\alpha$ be an ordinal number.

We say $\varphi$ is \keyword{$\Pi_{\alpha+1}$-extendible}
provided that $\varphi$ is $\Sigma_{\alpha}$-extendible
(so we have the valuation system 
$\vs{V}{\Sigma_\alpha L}{\Sigma_\alpha \varphi}{E}$)
and $\Sigma_\alpha \varphi$ is $\Pi$-extendible.

Suppose that $\varphi$ is $\Pi_{\alpha+1}$-extendible,
then since $\Sigma_\alpha \varphi$ is $\Pi$-extendible,
we have 
(see Def.~\ref{D:Pi-extendible})
a valuation system
 $\vs{V}{\Pi(\Sigma_\alpha L)}{\Pi(\Sigma_\alpha\varphi)}{E}$,
so define
\begin{equation*}
\Pi_{\alpha+1} L \eqdf \Pi(\Sigma_\alpha L)\qquad\qquad
\Pi_{\alpha+1} \varphi \eqdf \Pi(\Sigma_\alpha \varphi).
\end{equation*}


\item
Let~$\alpha$ be an ordinal number.
We say~$\varphi$ is \keyword{$\Sigma_{\alpha+1}$-extendible}
whenever $\varphi$ is $\Pi_{\alpha}$-extendible
and $\Pi_\alpha\varphi$ is $\Sigma$-extendible.
In that case,
define
\begin{equation*}
\Sigma_{\alpha+1} L \eqdf \Sigma(\Pi_\alpha L)\qquad\qquad
\Sigma_{\alpha+1} \varphi \eqdf \Sigma(\Pi_\alpha \varphi).
\end{equation*}

\item
Let~$\lambda$ be a limit ordinal.
We say $\varphi$ is \keyword{$\Pi_\lambda$-extendible}
if $\varphi$ is $\Pi_\alpha$-extendible
for each~$\alpha \in \lambda$.
Suppose that $\varphi$ is $\Pi_\lambda$-extendible.
By Requirement~\ref{req:hierarchy-A},
we know that $\Pi_\alpha \varphi$ extends $\Pi_\beta \varphi$
for $\beta<\alpha<\lambda$.
So define 
$\Pi_\lambda L \eqdf \textstyle{\bigcup_{\alpha < \lambda} \Pi_\alpha L},$
and let $\Pi_\lambda \varphi\colon \Pi_\lambda L\ra E$
be the map which extends
 $\Pi_\alpha \varphi$ for all $\alpha <\lambda$.

\item
Let~$\lambda$ be a limit ordinal.
We say $\varphi$ is \keyword{$\Sigma_\lambda$-extendible}
if $\varphi$ is $\Sigma_\alpha$-extendible
for all~$\alpha \in \lambda$.
Define 
$\Sigma_\lambda L \eqdf \textstyle{\bigcup_{\alpha < \lambda} \Sigma_\alpha L}$
and let $\Sigma_\lambda \varphi\colon \Sigma_\lambda L\ra E$
be the map which extends
all $\Sigma_\alpha \varphi$ where $\alpha <\lambda$.
\end{enumerate}
\end{dfn}

\subsubsection{Extension of maps}
%
%                  SIGMA-PRESERVING
%
\begin{dfn}
Let $P$ and $Q$ be posets.
Let $f\colon S\ra Q$ be a map, where $S\subseteq P$.
We say $f$ is \keyword{$\sigma$-preserving}
(with respect to~$P$)
provided that
\begin{enumerate}
\item
$f$ is order preserving;

\item
if 
$\bw_n{a_n}$ exists
(in~$P$)
for
$a_1 \leq a_2 \leq \dotsb$
from~$P$,
and if $\bw_n a_n\in S$,
then 
\begin{equation*}
f(\bw_n a_n) = \bw_n f(a_n);
\end{equation*}

\item
if 
$\bv_n{b_n}$ exists
for
$b_1 \geq b_2 \geq \dotsb$
from~$P$,
and if~$\bv_n b_n\in S$,
then 
\begin{equation*}
f(\bv_n b_n) = \bv_n f(b_n).
\end{equation*}
\end{enumerate}
\end{dfn}
%
%                  FIRST EXTENSION THEOREM
%
\begin{thm}
\label{T:ext1}
Let $\vs{V}{L}{\varphi}{E}$ and
 $\vs{W}{K}{\psi}{F}$ be extendible valuation systems.
Let
$A\colon V\ra W$
and 
$f\colon E\ra F$ be $\sigma$-preserving maps,
such that 
\begin{equation*}
A(L)\subseteq K
\qquad\text{and}\qquad
f \circ \varphi = \psi \circ A|L.
\end{equation*}
\begin{equation*}
\xymatrix{
V\ar[d]_{A} & 
  L\ar[r]^{\varphi} \ar[d]_{A|L} \ar@{_{(}->}[l] & 
  E\ar[d]^{f} \\
W &
  K\ar[r]^{\psi} \ar@{_{(}->}[l] & 
  F
}\end{equation*}
Then $A(\overline{L})\subseteq \overline{K}$
and $f \circ \overline\varphi = \overline\psi\circ A|\overline L$.
\end{thm}
\begin{proof}
We prove with induction that for every ordinal number~$\alpha$
we have 
\begin{equation}
\label{eq:L:ext1-1}
\begin{alignedat}{3}
A(\Pi_\alpha L)\,&\subseteq\, \overline{K}&
 \qquad f \circ \Pi_\alpha \varphi 
     \,&=\, \overline \psi \circ A | \Pi_\alpha L \\
A(\Sigma_\alpha L)\,&\subseteq\, \overline{K}&
 \qquad f \circ \Sigma_\alpha \varphi 
     \,&=\, \overline \psi \circ A | \Sigma_\alpha L. 
\end{alignedat}
\end{equation}
This is sufficient, because
$\overline{L}=\Pi_{\aleph_1} L$ and 
 $\overline \varphi = \Pi_{\aleph_1} \varphi$
(see~??).

\begin{enumerate}
\item We prove~\eqref{eq:L:ext1-1}
holds for $\alpha=0$.
Since $\Pi_0\varphi = \Sigma_0\varphi = \varphi$,
we need to prove that
$A(L)\subseteq \overline{K}$
and $f\circ \varphi = A| L$.
But this is valid by assumption.

\item
Let~$\alpha$ be an ordinal number
and assume~\eqref{eq:L:ext1-1}
holds for~$\alpha$;
we prove~\eqref{eq:L:ext1-1} holds for~$\alpha+1$.
We  only prove $A(\Pi_{\alpha+1} L) \subseteq \overline{K}$
and $f\circ \Pi_{\alpha+1}\varphi = \overline \psi \circ A|\Pi_{\alpha+1} L$;
the other part, $A(\Sigma_{\alpha+1} L) \subseteq \overline{K}$
and $f\circ \Sigma_{\alpha+1}\varphi 
= \overline\psi \circ A|\Sigma_{\alpha+1}L$
follows similarly.

Let $a\in \Pi_{\alpha+1} L$
be given. We need to prove that
\begin{equation}
\label{eq:L:ext1-2}
A(a)\in \overline{K}\qquad\text{and}\qquad
\overline\psi (A(a)) \,=\, f(\Pi_{\alpha+1}\varphi(a)).
\end{equation}
Recall that $\Pi_{\alpha+1}L = \Pi(\Sigma_\alpha L)$,
so write $a=\bw_n a_n$
for some 
$\Sigma_\alpha \varphi$-convergent
$a_1 \geq a_2 \geq \dotsb$
and note that $\Pi_{\alpha+1}\varphi (a) = \bw_n \Sigma_\alpha\varphi(a_n)$.
We have
\begin{alignat*}{3} 
f(\Pi_{\alpha+1}\varphi(a))
 \,&=\, f(\bw_n \Sigma_\alpha \varphi (a_n))
   && \\
 \,&=\, \bw_n f(\Sigma_\alpha\varphi(a_n))\qquad
   && \text{since $f$ is $\sigma$-preserving} \\
 \,&=\, \bw_n \overline{\psi} (A( a_n )) 
   && \text{since \eqref{eq:L:ext1-1} holds for~$\alpha$.} 
\end{alignat*}
So we see that $A(a_1)\geq A(a_2)\geq \dotsb$
is $\overline{\psi}$-convergent.
Since $\vs{W}{\overline{K}}{\overline{\psi}}{F}$ is complete,
this implies $\bw_n A(a_n) \in \overline{K}$
and $\bw_n\overline{\psi}(A(a_n))=\overline{\psi}(\bw_n A(a_n))$.
Because $A$ is $\sigma$-preserving,
we have $\bw_n A(a_n) = A(a)$.
Hence $A(a)\in \overline{K}$
and 
\begin{alignat*}{3}
f(\Pi_{\alpha+1}\varphi(a))
 \,&=\,  \bw_n \overline{\psi}(A(a_n)) \\
 \,&=\,  \overline{\psi} (\bw_n A(a_n)) \\
 \,&=\,  \overline{\psi} (A(a)).
\end{alignat*}
So we have proven Statement~\eqref{eq:L:ext1-2}.

\item
Let $\lambda$ be a limit ordinal,
and assume that \eqref{eq:L:ext1-1}
holds for all~$\alpha<\lambda$;
we prove that \eqref{eq:L:ext1-1} holds for~$\lambda$.
Since  $\Pi_\lambda \varphi = \Sigma_\lambda \varphi$,
we must prove that
\begin{equation}
A(\Pi_\lambda L)\subseteq \overline K
\qquad\text{and}\qquad
f\circ \Pi_\lambda \varphi \,=\, \overline\psi \circ A | \Pi_\lambda L.
\end{equation}
Let $a\in \Pi_\lambda L$ be given
in order to prove $A(a)\in \overline{K}$
and $\overline\psi(A(a))= f(\Pi_\lambda\varphi(a))$.
Recall that $\Pi_\lambda L = \bigcup_{\alpha < \lambda} \Pi_\alpha L$,
and $\Pi_\lambda \varphi \,|\,\Pi_\alpha L = \Pi_\alpha \varphi$
for all~$\alpha < \lambda$.
So choose $\alpha < \lambda$ such that
$a\in \Pi_\alpha L$.
Since \eqref{eq:L:ext1-1} holds for~$\alpha$,
we know that 
\begin{equation*}
A(\Pi_\alpha L) \subseteq \overline K
\qquad\text{and}\qquad
f\circ \Pi_\alpha \varphi = \overline\psi\circ A | \Pi_\alpha L.
\end{equation*}
Hence $A(a) \in A(\Pi_\alpha L) \subseteq \overline K$ and 
$f(\Pi_\lambda \varphi(a)) = f(\Pi_\alpha \varphi(a)) =
\overline\psi(A(a))$.\qedhere
\end{enumerate}
\end{proof}
\todo{Add example:
for a ring $\mathcal{A}$ with $X\in \mathcal{A}$,
we have $A\in\overline{\mathcal{A}} \implies 
X\backslash A \in \overline{\mathcal{A}}$.}
%
%                  SECOND EXTENSION THEOREM
%
\begin{thm}
\label{T:ext2}
Let $\vs{V}{L}{\varphi}{E}$ and
 $\vs{W}{K}{\psi}{F}$ be extendible valuation systems.
Let
$A\colon V\ra W$ be a $\sigma$-preserving map
such that $A(L)\subset K$.
Assume that
\begin{equation}
\label{eq:T:ext2-as}
\ld{\overline{\psi}}(A(c),A(d))\ \leq\  \ld{\overline{\varphi}}(c,d)
\end{equation}
for all $c,d\in V$ with $A(c),A(d)\in \overline K$.
\begin{equation*}
\xymatrix{
V\ar[d]_{A} & 
  L\ar[r]^{\varphi} \ar[d]_{A|L} \ar@{_{(}->}[l] & 
  E \\
W &
  K\ar[r]^{\psi} \ar@{_{(}->}[l] & 
  F
}\end{equation*}
Then $A(\overline{L})\subseteq \overline{K}$.
\end{thm}
\begin{proof}
With induction,
we prove that for every ordinal number~$\alpha$,
we have 
\begin{equation*}
A(\Pi_\alpha L)\subseteq \overline K
\qquad\text{and}\qquad
A(\Sigma_\alpha L)\subseteq \overline K.
\end{equation*}
This is sufficient, because $\overline L = \Pi_{\aleph_1} L$.

As one can  see,
such a proof might be quite similar to the proof of Theorem~\ref{T:ext1}.
Therefore,
we leave the details to the reader
and only prove the following statement.
\begin{equation}
\label{eq:T:ext2-1}
A(\Sigma_\alpha L) \subseteq \overline K
\quad\implies\quad
A(\Pi_{\alpha+1}L)\subseteq\overline K.
\end{equation}

Assume $A(\Sigma_\alpha L)\subseteq \overline{K}$
and let $a\in \Pi_{\alpha+1} L$ be given;
we must prove $A(a)\in \overline K$.
Write $a=\bw_n a_n$ for some $\Sigma_{\alpha}\varphi$-convergent
sequence
$a_1 \geq a_2 \geq \dotsb$.
Because we have assumed $A(\Sigma_\alpha L)\subseteq \overline{K}$,
we know that $A(a_i) \in \overline K$.
To prove $A(a)\in\overline K$,
it suffices to show that $A(a_1) \geq A(a_2) \geq \dotsb$
is $\overline{\psi}$-convergent.
Indeed, then
\begin{equation*}
A(a) \,\equiv\, A(\bw_n a_n) \,=\, \bw_n A(a_n)\,\in\, \overline{K},
\end{equation*}
because $A$ is $\sigma$-preserving and 
$\vs{W}{\overline{K}}{\overline{\psi}}{F}$
is complete.

To prove that the sequence $A(a_1)\geq A(a_2) \geq \dotsb$
is $\overline{\psi}$-convergent,
we must show that $\bw_n \overline \psi(A(a_n))$ exists.
Since~$F$ is $R$-complete (see Definition~\ref{D:R-complete})
and we have the inequality~\eqref{eq:T:ext2-as},
it suffices to show that $\bw_n \overline{\varphi}(a_n)$
exists. 
That is,
we must show that $a_1 \geq a_2 \geq \dotsb$ is 
$\overline{\varphi}$-convergent.
Of course,
this follows quickly from the fact that $a_1 \geq a_2 \geq \dotsb$
is $\Sigma_{\alpha}\varphi$-convergent.
We have proven Statement~\eqref{eq:T:ext2-1}.
\end{proof}
%
%                  RESTRICTION PROPOSITION         
%
\begin{prop}
\label{P:restriction}
Let $\vs{V}{L}\varphi{E}$ be an extendible valuation system,
and 
denote its completion by
$\vs{V}{\overline L}{\overline \varphi}{E}$.
Given $\ell \leq u$ from~$L$,
consider the valuation system
\begin{equation*}
\vs{[\ell,u]}{L\cap{[\ell, u]}}{\varphi|[\ell,u]}{E};
\end{equation*}
it is extendible. 
Denote its completion by
\begin{equation*}
\vs{[\ell,u]}{\overline{L\cap[\ell,u]}}{\overline{\varphi|[\ell,u]}}{E}.
\end{equation*}
We have $\overline{L\cap [\ell, u]} = \overline{L}\cap [\ell,u]$.
Moreover,
 $\overline{\varphi}$ and $\overline{\varphi|[\ell,u]}$
are identical on $\overline{L\cap [\ell,u]}$.
\end{prop}
\begin{proof}
One can easily see that $\overline\varphi | [\ell,u]$
extends $\varphi|[\ell,u]$
and that the valuation system
\begin{equation*}
\vs{[\ell,u]}{\overline{L}\cap [\ell,u]}{\overline\varphi | [\ell, u]}{E}
\end{equation*}
is complete.\todo{Generalize: 
the restriction of a complete system 
to a $\sigma$-closed set is complete.}
Hence $\varphi|[\ell,u]$ is extendible,
and $\overline\varphi | [\ell,u]$ extends
$\overline{\varphi|[\ell,u]}$ (see Theorem~??).
In particular,
$\overline{L\cap[\ell,u]}\subseteq \overline{L}\cap[\ell,u]$
and $\overline{\varphi}$ and $\overline{\varphi|[\ell,u]}$
are identical on~$\overline{L\cap[\ell,u]}$.
It remains to be shown that 
\begin{equation}
\label{eq:P:restriction}
\overline{L}\cap[\ell,u]\,\subseteq\,\overline{L\cap[\ell,u]}.
\end{equation}
To this end,
consider the map~$\varrho\colon V\ra [\ell, u]$
given by $\varrho(x)=\ell\vee (x\wedge u)$.
Note that $\varrho(x)=x$ for all~$x\in [\ell, u]$,
and thus $\varrho(\overline{L})=\overline{L}\cap[\ell,u]$.
So in order to prove~\eqref{eq:P:restriction},
we must show that
$\varrho(\overline{L})\subseteq\overline{L\cap[\ell,u]}$.
To do this, we apply Theorem~\ref{T:ext2}.
\begin{equation*}
\xymatrix{
V\ar[d]_{\varrho} &&
  L\ar[rr]^{\varphi} \ar[d]_{\varrho|L} \ar@{_{(}->}[ll] & &
  E \\
[\ell,u] &&
  L\cap[\ell,u]\ar[rr]^{\varphi|[\ell,u]} \ar@{_{(}->}[ll] &&
  E
}\end{equation*}
We must verify that $\varrho$ is
$\sigma$-preserving and that
\begin{equation}
\label{eq:P:restriction-1}
\ld{\overline{\varphi|[\ell,u]}}(\varrho(c),\varrho(d))
\ \leq\ 
\ld{\overline{\varphi}}(c,d)
\end{equation}
for all $c,d\in V$ with $\varrho(c),\varrho(d)\in \overline {L\cap [\ell,u]}$.
One can easily see that~$\varrho$ is $\sigma$-preserving,
because $V$ is $\sigma$-distributive
(see Definition~\ref{D:sigma-distributive}).
Concerning Inequality~\eqref{eq:P:restriction-1},
note that for $c,d\in V$
with $\varrho(c),\varrho(d)\in \overline {L\cap [\ell,u]}$
we have
\begin{alignat*}{3}
\ld{\overline\varphi|[\ell,u]}(\varrho(c),\varrho(d)) 
\ &=\ \ld{\overline\varphi}(\varrho(c),\varrho(d)) 
   && \text{since $\overline\varphi|\,\overline{L\cap[\ell,u]}
                           =\overline{\varphi| [\ell,u]}$}\\
\ &=\  \ld{\overline\varphi}(\,\ell\vee(c\wedge u),\,\ell\vee(d\wedge u)\,) 
   \quad&& \text{by definition of~$\varrho$} \\
\ &\leq\  \ld{\overline\varphi}(\,c\wedge u,\,d\wedge u\,) 
   && \text{by Lemma~\ref{L:wv-unif}} \\
\ &\leq\  \ld{\overline\varphi}(c,d)
   && \text{by Lemma~\ref{L:wv-unif}}.
\end{alignat*}
Hence Theorem~\ref{T:ext2} is applicable,
and we obtain Inequality~\eqref{eq:P:restriction}.
\end{proof}
%
%                  THIRD EXTENSION THEOREM
%
\begin{thm}
\label{T:ext3}
Let $\vs{V}{L}{\varphi}{E}$
and
 $\vs{W}{K}{\psi}{F}$ be extendible valuation systems.
Let $R$ be a sublattice of~$V$ with 
$L\subseteq R$.
Let
$f\colon E\ra F$ be a $\sigma$-preserving map,
and let $A\colon R\ra W$ be a $\sigma$-preserving map
with respect to~$V$.
Assume that $A(L)\subseteq K$
and  $f \circ \varphi = \psi \circ A|L$.
\begin{equation*}
\xymatrix{
V & 
  R\ar[d]_{A} \ar@{_{(}->}[l]& 
  L\ar[r]^{\varphi} \ar[d]_{A|L} \ar@{_{(}->}[l] & 
  E\ar[d]^{f} \\
& W &
  K\ar[r]^{\psi} \ar@{_{(}->}[l] & 
  F
}\end{equation*}
Assume that
$R$ is convex in~$V$,
and that
for every $c\in R$,
there are $\varphi$-convergent sequences $a_1 \leq a_2 \leq \dotsb$ 
and $b_1 \geq b_2 \geq \dotsb$
such that  $\bw_n a_n \leq c \leq \bv_n b_n$.

Then $A(R\cap \overline L)\subseteq \overline{K}$
and $f \circ \overline\varphi = \overline\psi\circ A$ on $\overline L \cap R$.
\end{thm}
\begin{proof}
Let us first prove the following special case.
\begin{equation}
\label{eq:T:ext3-claim-1}
\left[\quad
\begin{minipage}{.7\columnwidth}
Let $c\in \overline{L}\cap R$
with $\ell\leq c\leq u$ for some~$\ell,u\in L$.
Then 
\begin{equation*}
A(c)\in\overline{K}
\qquad\text{and}\qquad
f(\overline\varphi(c))= \overline\psi (A(c)).
\end{equation*}
\end{minipage}
\right.
\end{equation}
Let $c \in \overline{L}\cap R$
with $\ell \leq c \leq u$ for some $\ell,u\in L$ be given.
Then clearly $c\in [\ell, u]$.
Further, $[\ell,u]\subseteq R$ since~$R$ is convex
and $\ell,u\in R$ (as $L\subseteq R$).
So we have:
\begin{equation*}
\xymatrix{
[\ell,u]\ar[d]_{A|[\ell,u]} & 
  L\cap[\ell,u]\ar[r]^{\varphi|[\ell,u]} 
               \ar[d]_{A\,|\,L\cap[\ell,u]} \ar@{_{(}->}[l] & 
  E\ar[d]^{f} \\
W &
  K\ar[r]^{\psi} \ar@{_{(}->}[l] & 
  F
}\end{equation*}
Moreover, by Proposition~\ref{P:restriction},
we know that $c\in \overline{L\cap[\ell,u]}$
and $\overline{\varphi}(c) = \overline{\varphi|[\ell,u]}(c)$.
Hence Theorem~\ref{T:ext1}
yields $A(c)\in\overline{K}$
and $\overline{\psi}(A(c))
= f(\overline{\varphi|[\ell,u]}(c))$.
But then
$\overline{\psi}(A(c))
= f(\overline{\varphi}(c))$.
This proves Statement~\eqref{eq:T:ext3-claim-1}.

We proceed by proving another special case.
\begin{equation}
\label{eq:T:ext3-claim-2}
\left[\quad
\begin{minipage}{.7\columnwidth}
Let $c\in \overline{L}\cap R$
and suppose $c\geq \ell$ for some~$\ell\in L$.
Then 
\begin{equation*}
A(c)\in\overline{K}
\qquad\text{and}\qquad
f(\overline\varphi(c))= \overline\psi (A(c)).
\end{equation*}
\end{minipage}
\right.
\end{equation}
Let $c\in\overline{L}\cap R$ with $c\geq \ell$
for some~$\ell$ be given.
Pick $\varphi$-convergent $u_1 \leq u_2 \leq \dotsb$
such that $c \leq \bv_n u_n$.
Since $u_1 \geq u_2 \geq \dotsb$ is $\varphi$-convergent
and $c\in\overline{L}$,
we know that $c\wedge u_1 \leq c\wedge u_2 \leq \dotsb$
is $\overline{\varphi}$-convergent (see Proposition~\ref{P:R-main}).
Since $\vs{V}{\overline{L}}{\overline\varphi}{E}$ is complete,
this implies $\overline\varphi(c)
=\overline\varphi(\bv_n c\wedge u_n)
=\bv_n\overline\varphi(c\wedge u_n)$.
We get:
\begin{alignat*}{3}
f(\overline\varphi(c))
\,&=\, f(\bv_n\overline\varphi(c\wedge u_n)) &&  \\
\,&=\, \bv_n f(\overline\varphi(c\wedge u_n))
   \qquad && \text{since $f$ is $\sigma$-prevering}
\shortintertext{Note that $\ell\leq c\wedge u_n \leq u_n$.
So by \eqref{eq:T:ext3-claim-1}, we get $A(c\wedge u_n)\in\overline K$ and:}
f(\overline\varphi(c))
\,&=\, \bv_n \overline{\psi} (A (c\wedge u_n))  &&
\shortintertext{From this we 
see $A(c\wedge u_1) \leq A(c\wedge u_2)\leq \dotsb$
is $\overline\psi$-convergent.
Since $\vs{W}{\overline K}{\overline \psi}{F}$
is complete,
we get $f(\overline\varphi(c)=\bv_n A(c\wedge u_n) \in \overline K$
and}
f(\overline\varphi(c))
 \,&=\,  \overline\psi (\bv_n A(c\wedge u_n)) \\
   &=\,  \overline\psi (A(\bv_n c\wedge u_n) )
      && \text{since $A$ is $\sigma$-preserving} \\
   &=\,  \overline\psi (A(c)).
\end{alignat*}
This completes the proof of Statement~\eqref{eq:T:ext3-claim-2}.

We are now ready to give the proof of the general case.
Let $c\in R\cap \overline L$ be given.
We need to prove that $A(c)\in\overline K$
and $f(\overline{\varphi}(c))=\overline{\psi}(A(c))$.
Pick $\varphi$-convergent $\ell_1 \geq \ell_2 \geq \dotsb$
such that $\bw_n \ell_n \leq c$.
Since $\ell_1 \geq \ell_2 \geq \dotsb$
is $\varphi$-convergent and $c\in \overline L$,
we know that $\ell_1 \vee c \geq \ell_2 \vee c\geq \dotsb$ 
is $\overline\varphi$-convergent.
Since $\vs{V}{\overline L}{\overline\varphi}{E}$
is complete,
this implies that $\overline\varphi(c)
=\overline\varphi(\bw_n \ell_n \vee c)
=\bw_n\overline\varphi(\ell_n \vee c)$.
We get:
\begin{alignat*}{3}
f(\overline\varphi(c))
\,&=\, f(\bw_n\overline\varphi(\ell_n \vee c)) &&  \\
\,&=\, \bw_n f(\overline\varphi(\ell_n\vee c))
   \qquad && \text{since $f$ is $\sigma$-prevering}
\shortintertext{Note that $\ell_n\leq \ell_n \vee c$.
Further,
since $R$ is a sublattice of~$V$,
and $c\in R$, $\ell_n\in L\subseteq R$,
we get $\ell_n \vee c\in R$.
So by \eqref{eq:T:ext3-claim-2}, we have $A(\ell_n\vee c)\in\overline K$ and:}
f(\overline\varphi(c))
\,&=\, \bw_n \overline{\psi} (A (\ell_n \vee c))  &&
\shortintertext{From this we 
see $A(\ell_1 \vee c) \geq A(\ell_2 \vee c)\geq \dotsb$
is $\overline\psi$-convergent.
Since $\vs{W}{\overline K}{\overline \psi}{F}$
is complete,
we get $f(\overline\varphi(c)=\bw_n A(\ell_n \vee c) \in \overline K$
and}
f(\overline\varphi(c))
 \,&=\,  \overline\psi (\bw_n A(\ell_n \vee c)) \\
   &=\,  \overline\psi (A(\bw_n\ell_n \vee c) )
      && \text{since $A$ is $\sigma$-preserving} \\
   &=\,  \overline\psi (A(c)).
\end{alignat*}
We are done.
\end{proof}
%
%                  CLOSURE UNDER ADDITION
%
\begin{prop}
\label{P:subgroup}
Let $\vs{V}{L}{\varphi}{E}$ be an extendible valuation system.
Let $R$ be a sublattice of~$V$
endowed with a group structure.
Assume $L$ is a subgroup of~$R$ and that $\varphi$ is a group homomorphism.

Further, assume 
that $R$ is convex and that for every $c\in R$,
there are $\varphi$-convergent sequences
$a_1 \geq a_2 \geq \dotsb$ and
$b_1 \leq b_2 \leq \dotsb$ 
such that $\bw_n a_n \leq c\leq \bv_n b_n$.

Then $\overline L \cap R$ is a subgroup of~$R$,
and $\overline \varphi | R$ is a group homomorphism.
\end{prop}
\begin{proof}
In order to show that $\overline L\cap R$ is a subgroup of~$R$,
we must prove the following.
\begin{enumerate}
\item \label{tp:P:subgroup-1}
If $a,b\in \overline{L}\cap R$, then $a+b\in \overline L$.

\item \label{tp:P:subgroup-2}
If $a \in \overline{L}\cap R$, then $-a\in \overline{L}$.
\end{enumerate}
We only give a proof for~\ref{tp:P:subgroup-1}.
It will then be clear how to prove~\ref{tp:P:subgroup-2}.

We aim to apply Theorem~\ref{T:ext3}.
To this end,
the reader can easily verify that
$\vs{V\times V}{L\times L}{\varphi\times\varphi}{E\times E}$
is an extendible valuation system;
that its completion is
$\vs{V\times V}{\overline L\times\overline L}
{\overline\varphi \times\overline\varphi}{E\times E}$;
that $R\times R$ is a convex sublattice of~$V\times V$;
that the assignment $(c,d)\mapsto c+d$
yields a $\sigma$-preserving map $A\colon R\times R\ra V$
 with respect to~$V\times V$;
that the map $f\colon E\times E\ra E$ given by
$f(x,y)=x+y$ is $\sigma$-preseving.

Further, note that $A(L\times L)\subseteq L$
because~$L$ is a subgroup of~$R$.
Note that for all $c_1,c_2\in R\times R$
there are $\varphi$-convergent  $\ell^i_1 \geq \ell^i_2 \geq \dotsb$
and $u^i_1 \leq u^i_2 \leq \dotsb$
such that $\bw_n \ell^i_n \leq c_i \leq \bv_n u^i_n$,
and thus $\bw_n (\ell^1_n,\ell^2_n) \leq (c_1,c_2) \leq \bv_n (u^1_n, u^2_n)$,
where $(\ell^1_1,\ell^2_1) \geq (\ell^1_2,\ell^2_2)\geq \dotsb$
and $(u^1_1,u^2_1)\leq (u^1_2,u^2_2)\leq \dotsb$
are $\varphi\times\varphi$-convergent.
Finally,
note that $f\circ (\varphi\times \varphi) = \varphi \circ A|(L\times L)$,
because $\varphi$ is a group homomorphism.
\begin{equation*}
\xymatrix{
V\times V & 
  R\times R\ar[d]_{+} \ar@{_{(}->}[l]& 
  L\times L\ar[r]^{\varphi\times\varphi} 
     \ar[d]_{+} \ar@{_{(}->}[l] & 
  E\times E\ar[d]^{+} \\
& V &
  L\ar[r]^{\varphi} \ar@{_{(}->}[l] & 
  E
}\end{equation*}

So we are in a position to apply Theorem~\ref{T:ext3}.
It gives us that $A(\overline L\times \overline L \cap R\times R)\subseteq L$ 
and 
$f\circ (\overline \varphi \times \overline \varphi)
= \overline \varphi \circ A$ on
 $\overline {L}\times \overline{L} \cap R\times R$.
In other words,
if $c,d\in \overline{L}\cap R$, then $c+d \in \overline{L}$,
and $\overline\varphi(c+d)=\overline\varphi(c)+\overline\varphi(d)$.
Hence we have proven statement~\ref{tp:P:subgroup-1},
and at the same time we have shown that~$\varphi$ is a group homomorphism.
\end{proof}

\end{document}
